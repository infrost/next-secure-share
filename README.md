
Need English?[![en](https://img.shields.io/badge/lang-en-red.svg)](https://github.com/infrost/next-secure-share/blob/master/README.en.md)

# Next Secure Share

å¦‚ä½•å®‰å…¨åœ°é€šè¿‡äº’è”ç½‘ä¼ è¾“å¯†ç ï¼ŸåŒæ—¶ä¸è®©å¯¹æ–¹æœ‰æ“ä½œæˆæœ¬ï¼Ÿè¿™æ˜¯ä¸€ä¸ªé›†æˆäº†**ä¸€æ¬¡æ€§ç§å¯†ä¿¡æ¯åˆ†äº«**ä¸**ç®€æ˜“ç«¯åˆ°ç«¯åŠ å¯†èŠå¤©**çš„å®‰å…¨é€šä¿¡å¹³å°ã€‚é€šè¿‡â€œé˜…åå³ç„šâ€é“¾æ¥å’Œæµè§ˆå™¨å†…åŠ å¯†æŠ€æœ¯ï¼Œç¡®ä¿æ‚¨çš„æ•æ„Ÿä¿¡æ¯åœ¨é€è¾¾åå³åˆ»é”€æ¯ï¼Œæˆ–åœ¨ç§å¯†ä¼šè¯ä¸­å…¨ç¨‹åŠ å¯†ï¼ˆå¸¦2FAäºŒæ¬¡éªŒè¯ä¸è®¿é—®å®¡è®¡åŠŸèƒ½ï¼‰ã€‚æœåŠ¡ç«¯å’Œæ•°æ®åº“æ°¸è¿œæ— æ³•å¾—çŸ¥æ‚¨çš„ä¼ è¾“å†…å®¹ã€‚ **è¿™æ˜¯ä¸€ä¸ªå¯ä»¥ç›´æ¥å…è´¹éƒ¨ç½²åœ¨vercelä¸Šçš„next.jsé¡¹ç›®ã€‚**

[![ç«‹å³å°è¯•ï¼](https://img.shields.io/badge/é¡¹ç›®æ¼”ç¤º-ç«‹å³å°è¯•ï¼-5c6bc0?style=for-the-badge)](https://nextsecureshare.vercel.app)    [![éƒ¨ç½²æŒ‡å—](https://img.shields.io/badge/éƒ¨ç½²æŒ‡å—-ç‚¹å‡»å¼€å§‹-ecab20?style=for-the-badge)](#å¿«é€Ÿå¼€å§‹ä¸€é”®éƒ¨ç½²åˆ°-vercel)    [![English](https://img.shields.io/badge/English-Readme-5cab70?style=for-the-badge)](https://github.com/infrost/next-secure-share/blob/master/README.en.md)



<img src="images/demo.png" alt="æ¼”ç¤ºå›¾" width="400" />

---

## ä¸ºä»€ä¹ˆé€‰æ‹© Next Secure Shareï¼Ÿ

ä½ æ˜¯å¦æ›¾é€šè¿‡å¾®ä¿¡ã€Slack æˆ–é‚®ä»¶å‘é€è¿‡å¯†ç ã€API å¯†é’¥æˆ–æœåŠ¡å™¨ç™»å½•å‡­è¯ï¼Ÿè¿™äº›é€šä¿¡æ¸ é“é€šå¸¸ä¼šæ°¸ä¹…ä¿å­˜èŠå¤©è®°å½•ï¼ŒæœåŠ¡å™¨ä¹Ÿå¯èƒ½å­˜å‚¨ä½ çš„æ˜æ–‡ä¿¡æ¯ã€‚ä¸€æ—¦è´¦å·è¢«ç›—ã€é‚®ä»¶è¢«æˆªè·æˆ–æœåŠ¡å•†æ•°æ®åº“æ³„éœ²ï¼Œè¿™äº›æ•æ„Ÿä¿¡æ¯å°†é¢ä¸´å·¨å¤§çš„å®‰å…¨é£é™©ã€‚

**Next Secure Share è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼Œå¹¶æä¾›äº†ä¸¤ç§æ ¸å¿ƒçš„å®‰å…¨é€šä¿¡æ–¹å¼ï¼š**

1.  **ä¸€æ¬¡æ€§é“¾æ¥**: å°±åƒä¸€ä¸ªæ•°å­—ä¸–ç•Œçš„â€œé˜…åå³ç„šâ€ä¿é™©ç®±ã€‚ä½ å¯ä»¥å°†æ•æ„Ÿä¿¡æ¯æ”¾å…¥è¿™ä¸ªä¿é™©ç®±ï¼Œç”Ÿæˆä¸€ä¸ªæ—¶æ•ˆé“¾æ¥ã€‚ä½ ä¹Ÿå¯ä»¥è®¾ç½®â€œé˜…åå³ç„šâ€ï¼Œæ¥æ”¶è€…é€šè¿‡é“¾æ¥å–å‡ºä¿¡æ¯åï¼Œä¿é™©ç®±å’Œé‡Œé¢çš„ä¿¡æ¯ä¼šç«‹å³æ°¸ä¹…é”€æ¯ã€‚
2.  **ç«¯åˆ°ç«¯åŠ å¯†èŠå¤©å®¤**: åˆ›å»ºä¸€ä¸ªä¸´æ—¶çš„ã€å®Œå…¨ç§å¯†çš„èŠå¤©æˆ¿é—´ã€‚æ‰€æœ‰æ¶ˆæ¯åœ¨æ‚¨çš„æµè§ˆå™¨ä¸­åŠ å¯†ï¼Œåœ¨å¯¹æ–¹çš„æµè§ˆå™¨ä¸­è§£å¯†ã€‚æœåŠ¡å™¨åªä¼ é€’åŠ å¯†åçš„ä¹±ç ï¼Œæ— æ³•çª¥æ¢ä»»ä½•èŠå¤©å†…å®¹ã€‚

### å…¸å‹åœºæ™¯

#### åœºæ™¯ä¸€ï¼šå®‰å…¨åˆ†å‘ä¸€æ¬¡æ€§å¯†ç  (`/send` æ¨¡å—)

> ä½ éœ€è¦å°†ä¸€ä¸ªåŠ å¯†å‹ç¼©åŒ…çš„è§£å‹å¯†ç å®‰å…¨åœ°å‘é€ç»™å®¢æˆ·ã€‚
> 1.  ä½ é€šè¿‡é‚®ä»¶å°†**åŠ å¯†çš„å‹ç¼©åŒ…**å‘é€ç»™å®¢æˆ·ã€‚
> 2.  ä½ ä½¿ç”¨ **Next Secure Share** çš„**ä¸€æ¬¡æ€§é“¾æ¥**åŠŸèƒ½ï¼Œç”Ÿæˆä¸€ä¸ªåŒ…å«è§£å‹å¯†ç çš„é“¾æ¥ã€‚
> 3.  ä½ é€šè¿‡å¦ä¸€å°é‚®ä»¶æˆ–å³æ—¶æ¶ˆæ¯å°†è¿™ä¸ª**å®‰å…¨é“¾æ¥**å‘ç»™å®¢æˆ·ã€‚
>
> å®¢æˆ·æ‰“å¼€é“¾æ¥æŸ¥çœ‹å¯†ç åï¼Œè¯¥é“¾æ¥ç«‹å³å¤±æ•ˆã€‚å³ä½¿ä¼ é€é“¾æ¥çš„é‚®ä»¶è¢«æ‹¦æˆªï¼Œæ”»å‡»è€…ä¹Ÿæ— æ³•å†æ¬¡è®¿é—®å¯†ç ã€‚
>
> **å®‰å…¨å‡çº§**ï¼šå‡è®¾å­˜åœ¨ä¸€ä¸ªèƒ½å®æ—¶ç›‘æ§é€šä¿¡çš„â€œä¸­é—´äººâ€ï¼Œå½“ä»–æŠ¢å…ˆç‚¹å¼€é“¾æ¥åï¼ŒçœŸæ­£çš„æ¥æ”¶è€…ä¼šå‘ç°é“¾æ¥å·²å¤±æ•ˆï¼Œä»è€Œç«‹å³è­¦è§‰åˆ°ä¿¡æ¯å·²æ³„éœ²ã€‚æˆ‘ä»¬çš„å®¡è®¡ç³»ç»Ÿä¼šè®°å½•ä¸‹æ¯ä¸€æ¬¡è®¿é—®å°è¯•çš„ IP åœ°å€ï¼Œä¸ºè¿½è¸ªæä¾›çº¿ç´¢ã€‚

#### åœºæ™¯äºŒï¼šå¼€å‘å›¢é˜Ÿçš„â€œç´§æ€¥ç”Ÿäº§æ’éšœâ€ (`/chat` æ¨¡å—)

> ä½ çš„å›¢é˜Ÿæ­£åœ¨å¤„ç†ä¸€ä¸ªç´§æ€¥çš„çº¿ä¸Šç”Ÿäº§ç¯å¢ƒæ•…éšœã€‚ä½ éœ€è¦ä¸å¦ä¸€ä½è¿œç¨‹åŒäº‹ï¼ˆæˆ–ä¸´æ—¶é¡¾é—®ï¼‰ååŒæ’æŸ¥ã€‚è¿™ä¸ªè¿‡ç¨‹æ¶‰åŠåˆ°äº¤æ¢ä¸´æ—¶çš„æœåŠ¡å™¨SSHå‡­è¯ã€APIå¯†é’¥ã€æŸ¥çœ‹åŒ…å«æ•æ„Ÿç”¨æˆ·æ•°æ®çš„æ—¥å¿—ç‰‡æ®µï¼Œä»¥åŠè®¨è®ºä¿®å¤æ–¹æ¡ˆã€‚
>
> **é—®é¢˜**ï¼šä½¿ç”¨ Slackã€Teams æˆ–å¾®ä¿¡è¿›è¡Œæ²Ÿé€šæ˜¯æåº¦å±é™©çš„ã€‚è¿™äº›å¹³å°çš„æœåŠ¡å™¨ä¼šæ°¸ä¹…å­˜å‚¨ä½ ä»¬çš„èŠå¤©è®°å½•ï¼ŒåŒ…æ‹¬æ‰€æœ‰æ•æ„Ÿå‡­è¯å’Œæ—¥å¿—ï¼Œæ„æˆäº†ä¸€ä¸ªå·¨å¤§çš„é•¿æœŸå®‰å…¨éšæ‚£ã€‚
>
> **è§£å†³æ–¹æ¡ˆ**ï¼š
> 1.  **åˆ›å»ºå®‰å…¨é€šé“**ï¼šä½ è®¿é—®è‡ªå·±çš„ `Next Secure Share` å¹³å°ï¼Œè¿›å…¥ `/chat` æ¨¡å—ï¼Œåˆ›å»ºä¸€ä¸ªå¸¦**è®¿é—®å¯†ç **ï¼ˆä¾‹å¦‚ `ProjectPhoenix-Debug`ï¼‰çš„ç«¯åˆ°ç«¯åŠ å¯†èŠå¤©å®¤ã€‚ç³»ç»Ÿä¼šç”Ÿæˆä¸¤ä¸ªå‚ä¸è€…é“¾æ¥ï¼ˆA å’Œ Bï¼‰ã€‚
> 2.  **å®‰å…¨åˆ†å‘â€œé—¨ç¥¨â€**ï¼šä½ ä½¿ç”¨ `/send` æ¨¡å—ï¼Œå°†è¿™ä¸ªèŠå¤©å®¤çš„**è®¿é—®å¯†ç ** (`ProjectPhoenix-Debug`) æ”¾å…¥ä¸€ä¸ªâ€œé˜…åå³ç„šâ€çš„é“¾æ¥ä¸­ã€‚
> 3.  **å¼€å§‹ä¼šè¯**ï¼šä½ é€šè¿‡å¸¸è§„æ–¹å¼ï¼ˆå¦‚é‚®ä»¶ï¼‰å°†**èŠå¤©å®¤é“¾æ¥**å’Œ**åŒ…å«è®¿é—®å¯†ç çš„ä¸€æ¬¡æ€§é“¾æ¥**åŒæ—¶å‘ç»™åŒäº‹ã€‚
> 4.  åŒäº‹å…ˆç‚¹å¼€ä¸€æ¬¡æ€§é“¾æ¥è·å–â€œé—¨ç¥¨â€ï¼ˆè®¿é—®å¯†ç ï¼‰ï¼Œè¯¥é“¾æ¥éšå³é”€æ¯ã€‚ç„¶åä»–ç‚¹å‡»èŠå¤©å®¤é“¾æ¥ï¼Œè¾“å…¥å¯†ç ï¼Œå³å¯è¿›å…¥è¿™ä¸ªå®Œå…¨ç§å¯†çš„ä¼šè¯ã€‚
>
> **å®‰å…¨ä¿éšœ**ï¼š
> åœ¨è¿™ä¸ªèŠå¤©å®¤é‡Œï¼Œä½ ä»¬å¯ä»¥æ”¾å¿ƒåœ°äº¤æ¢æ‰€æœ‰æ•æ„Ÿä¿¡æ¯ã€‚æ‰€æœ‰æ¶ˆæ¯éƒ½åœ¨ä½ ä»¬å„è‡ªçš„æµè§ˆå™¨ä¸­åŠ å¯†å’Œè§£å¯†ï¼ŒæœåŠ¡å™¨çœ‹åˆ°çš„åªæ˜¯ä¸€ä¸²ä¸²æ— æ³•ç ´è¯‘çš„ä¹±ç ã€‚æ•…éšœæ’æŸ¥å®Œæ¯•åï¼Œå¯ä»¥æ‰‹åŠ¨é”€æ¯è¯¥èŠå¤©å®¤ï¼Œæ‰€æœ‰åŠ å¯†è®°å½•å°†ä»æœåŠ¡å™¨å½»åº•æŠ¹å»ã€‚
>
> **å®‰å…¨å‡çº§**ï¼šæƒ³è±¡ä¸€ä¸‹ï¼Œå³ä½¿åœ¨ä½ ä»¬å¯¹è¯æœŸé—´ï¼Œæ‰˜ç®¡ `Next Secure Share` çš„æœåŠ¡å™¨è¢«é»‘å®¢å®Œå…¨æ”»ç ´ã€‚é»‘å®¢èƒ½æ‹¿åˆ°çš„ä¹Ÿåªæ˜¯èŠå¤©å®¤é‡Œä¸€å †åŠ å¯†åçš„æ¶ˆæ¯æ•°æ®ï¼Œ**ä»–æ— æ³•è§£å¯†ä»»ä½•å†…å®¹**ï¼Œå› ä¸ºè§£å¯†çš„å¯†é’¥ä»æœªç¦»å¼€è¿‡ä½ å’Œä½ åŒäº‹çš„æµè§ˆå™¨ã€‚è¿™ä¾¿æ˜¯ç«¯åˆ°ç«¯åŠ å¯†çš„å¼ºå¤§ä¹‹å¤„ã€‚

## æ ¸å¿ƒåŠŸèƒ½

*   **åŒæ¨¡å¼å®‰å…¨é€šä¿¡**ï¼šåŒæ—¶æ”¯æŒâ€œé˜…åå³ç„š/äºŒæ¬¡éªŒè¯â€çš„ä¸€æ¬¡æ€§ä¿¡æ¯åˆ†äº«å’Œâ€œE2EEâ€çš„ç«¯åˆ°ç«¯åŠ å¯†èŠå¤©ã€‚
*   **é›¶æˆæœ¬éƒ¨ç½²**ï¼šåŸºäº Vercel å’Œ Vercel KV çš„**å…è´¹å¥—é¤**ï¼Œæ— éœ€ä»»ä½•æœåŠ¡å™¨è´¹ç”¨å³å¯æ‹¥æœ‰è‡ªå·±çš„ç§å¯†åˆ†äº«å¹³å°ã€‚
*   **ä¸€æ¬¡æ€§è®¿é—®**ï¼šåˆ†äº«é“¾æ¥åœ¨è¢«è®¿é—®ä¸€æ¬¡åç«‹å³è‡ªåŠ¨é”€æ¯ï¼Œå½»åº•æœç»ä¿¡æ¯äºŒæ¬¡æ³„éœ²çš„é£é™©ã€‚
*   **è‡ªå®šä¹‰æ—¶æ•ˆ**ï¼šå¯ä»¥ä¸ºæ¯ä¸ªé“¾æ¥æˆ–èŠå¤©å®¤è®¾ç½®ç‹¬ç«‹çš„è¿‡æœŸæ—¶é—´ï¼Œè¿‡æœŸåè‡ªåŠ¨æ¸…ç†ã€‚
*   **å¼€ç®±å³ç”¨**ï¼šä¸€é”®å…‹éš†å’Œéƒ¨ç½²ï¼Œåªéœ€ç®€å•é…ç½®ç¯å¢ƒå˜é‡å³å¯ä¸Šçº¿ã€‚
*   **å¤šè¯­è¨€æ”¯æŒ**ï¼šå†…ç½®ç®€å•çš„è‹±è¯­ç•Œé¢åˆ‡æ¢ï¼Œæ–¹ä¾¿å›½é™…ç”¨æˆ·ä½¿ç”¨ã€‚

## å¤§é“è‡³ç®€ï¼šä¸“ä¸ºæ˜“ç”¨æ€§è€Œè®¾è®¡

æˆ‘ä»¬åšä¿¡ï¼Œæœ€å¥½çš„å®‰å…¨å·¥å…·åº”å½“æ˜¯æ— æ„Ÿçš„ã€æ˜“äºä½¿ç”¨çš„ã€‚`Next Secure Share` åœ¨è®¾è®¡çš„æ¯ä¸€ä¸ªç¯èŠ‚éƒ½è´¯å½»äº†ç®€æ´æ˜“ç”¨çš„åŸåˆ™ã€‚

#### ä¸ºéƒ¨ç½²è€…ï¼šè½»æ¾æ‹¥æœ‰ï¼Œé›¶æˆæœ¬è¿ç»´
*   **ä¸€é”®éƒ¨ç½²**ï¼šé€šè¿‡ Vercel çš„éƒ¨ç½²æŒ‰é’®ï¼Œæ‚¨æ— éœ€ä¸“ä¸šçš„è¿ç»´çŸ¥è¯†ï¼Œåœ¨å‡ åˆ†é’Ÿå†…å³å¯æ‹¥æœ‰ä¸€ä¸ªåŠŸèƒ½å®Œæ•´çš„ä¸“å±å¹³å°ã€‚
*   **é›¶æˆæœ¬å¯åŠ¨**ï¼šé¡¹ç›®å®Œå…¨åŸºäº Vercel å’Œ Vercel KV (Upstash) çš„å…è´¹å¥—é¤æ„å»ºï¼Œæ— æœåŠ¡å™¨è´¹ç”¨ï¼Œæ— æ•°æ®åº“å¼€é”€ã€‚
*   **æç®€é…ç½®**ï¼šæ‰€æœ‰é…ç½®é¡¹å‡é€šè¿‡æ ‡å‡†çš„ç¯å¢ƒå˜é‡è¿›è¡Œç®¡ç†ï¼Œé€»è¾‘æ¸…æ™°ï¼Œæ–‡æ¡£å®Œå¤‡ã€‚

#### ä¸ºä½¿ç”¨è€…ï¼šç›´è§‚æ“ä½œï¼Œç”¨å®Œå³èµ°
*   **å…æ³¨å†Œï¼Œæ— è´Ÿæ‹…**ï¼šæ— è®ºæ˜¯åˆ†äº«è€…è¿˜æ˜¯æ¥æ”¶è€…ï¼Œéƒ½æ— éœ€æ³¨å†Œæˆ–ç™»å½•è´¦æˆ·ï¼Œå®ç°äº†çœŸæ­£çš„â€œç”¨å®Œå³èµ°â€ã€‚
*   **ç›´è§‚çš„æµç¨‹**ï¼šç•Œé¢è®¾è®¡é«˜åº¦èšç„¦äºæ ¸å¿ƒåŠŸèƒ½ï¼Œæ²¡æœ‰å¤šä½™çš„é€‰é¡¹å¹²æ‰°ï¼Œå‡ ä¹æ²¡æœ‰å­¦ä¹ æˆæœ¬ã€‚
*   **æ¸…æ™°çš„çŠ¶æ€åé¦ˆ**ï¼šä»é“¾æ¥ç”Ÿæˆã€ç­‰å¾…æŸ¥çœ‹åˆ°æœ€ç»ˆé”€æ¯ï¼Œç³»ç»Ÿéƒ½ä¼šæä¾›æ˜ç¡®çš„è§†è§‰åé¦ˆï¼Œè®©ç”¨æˆ·å……æ»¡ä¿¡å¿ƒã€‚

### âœ¨ æ¥æ”¶è€…çš„â€œé›¶è´Ÿæ‹…â€ä½“éªŒï¼šåªéœ€ç‚¹å‡»é“¾æ¥
åœ¨æ•´ä¸ªå®‰å…¨æµç¨‹ä¸­ï¼Œä¿¡æ¯æ¥æ”¶æ–¹â€”â€”é‚£ä¸ªæœ€éœ€è¦è¢«ä¿æŠ¤ä½†å¾€å¾€æœ€ç¼ºä¹æŠ€æœ¯èƒŒæ™¯çš„ç”¨æˆ·â€”â€”è‡ªå§‹è‡³ç»ˆåªéœ€è¦åšä¸€ä¸ªåŠ¨ä½œï¼š**ç‚¹å‡»é“¾æ¥ã€‚**

è¿™å¹¶éå¶ç„¶ï¼Œè€Œæ˜¯ä¸€ä¸ªæ ¸å¿ƒçš„è®¾è®¡å“²å­¦ã€‚**æˆ‘ä»¬å°†æ‰€æœ‰å¤æ‚æ€§éƒ½å°è£…åœ¨ä¸€ä¸ªç®€å•çš„é“¾æ¥ä¸­**ï¼Œæ¶ˆé™¤äº†æ¥æ”¶æ–¹çš„æ‰€æœ‰æ“ä½œè´Ÿæ‹…ã€‚è¿™ä½¿å¾—å‘é€è€…å¯ä»¥æ¯«æ— é¡¾è™‘åœ°ä½¿ç”¨æˆ‘ä»¬çš„å®‰å…¨æ–¹æ¡ˆï¼Œå› ä¸ºä»–ä»¬çŸ¥é“å¯¹æ–¹ä¸€å®šèƒ½ç”¨ã€ä¼šç”¨ã€‚

## ğŸ›¡ï¸ å®‰å…¨æ¨¡å‹è¯¦è§£ï¼šæˆ‘ä»¬å¦‚ä½•ä¿éšœæ‚¨çš„æ•°æ®å®‰å…¨ï¼Ÿ

å®‰å…¨æ˜¯ `Next Secure Share` çš„æ ¸å¿ƒã€‚æˆ‘ä»¬é‡‡ç”¨â€œçºµæ·±é˜²å¾¡â€å’Œâ€œé›¶ä¿¡ä»»â€åŸåˆ™è®¾è®¡äº†æ•´ä¸ªç³»ç»Ÿã€‚

#### 1. `/send` æ¨¡å—ï¼šä¸€æ¬¡æ€§é“¾æ¥çš„â€œä¿é™©ç®±â€æ¨¡å‹
*   **æ•°æ®çš„â€œé˜…åå³ç„šâ€**ï¼šå½“æ¥æ”¶è€…é€šè¿‡é“¾æ¥è®¿é—®ä¿¡æ¯åï¼Œè¯¥ä¿¡æ¯ä¼š**ç«‹å³ä»æ•°æ®åº“ä¸­è¢«æ°¸ä¹…åˆ é™¤**ï¼Œå½»åº•æ¶ˆé™¤åé¡¾ä¹‹å¿§ã€‚
*   **æœåŠ¡ç«¯å¼ºåŠ å¯†**ï¼šåœ¨ä¿¡æ¯å­˜å…¥æ•°æ®åº“çš„çŸ­æš‚ç”Ÿå‘½å‘¨æœŸé‡Œï¼Œå®ƒä¹Ÿä½¿ç”¨ `AES-256` ç®—æ³•åœ¨æœåŠ¡ç«¯è¿›è¡Œäº†åŠ å¯†ã€‚å³ä½¿æ•°æ®åº“è¢«æ”»ç ´ï¼Œæ”»å‡»è€…æ‹¿åˆ°çš„ä¹Ÿåªæ˜¯æ— æ³•æ‰“å¼€çš„â€œä¿é™©ç®±â€ã€‚
*   **é‚®ä»¶äºŒæ¬¡éªŒè¯ (å¯é€‰)**ï¼šä¸ºæœ€é«˜å®‰å…¨çº§åˆ«çš„åœºæ™¯å¢åŠ ä¸€é“éªŒè¯å±éšœï¼Œç¡®ä¿åªæœ‰çœŸæ­£çš„æ¥æ”¶è€…æ‰èƒ½æŸ¥çœ‹ä¿¡æ¯ã€‚

#### 2. `/chat` æ¨¡å—ï¼šâ€œé›¶ä¿¡ä»»â€çš„ç«¯åˆ°ç«¯åŠ å¯† (E2EE)
*   **ç«¯åˆ°ç«¯åŠ å¯†**ï¼šæ‰€æœ‰èŠå¤©æ¶ˆæ¯çš„åŠ å¯†å’Œè§£å¯†æ“ä½œï¼Œ**å®Œå…¨åœ¨æ‚¨çš„æµè§ˆå™¨ï¼ˆå®¢æˆ·ç«¯ï¼‰ä¸­è¿›è¡Œ**ã€‚æœåŠ¡å™¨çš„è§’è‰²ä»…ä»…æ˜¯ä¸€ä¸ªâ€œç›²äººé‚®å·®â€ï¼Œè´Ÿè´£ä¼ é€’å®ƒè‡ªå·±ä¹Ÿæ— æ³•è¯†åˆ«çš„åŠ å¯†æ•°æ®åŒ…ã€‚
*   **å¯†é’¥ä¸è½åœ°**ï¼šèŠå¤©å®¤çš„åŠ è§£å¯†å¯†é’¥è¢«å­˜å‚¨åœ¨ URL çš„â€œå“ˆå¸Œâ€éƒ¨åˆ†ï¼ˆ`#`å·åé¢çš„å­—ç¬¦ä¸²ï¼‰ã€‚æ ¹æ® Web æ ‡å‡†ï¼Œ**è¿™éƒ¨åˆ†å†…å®¹æ°¸è¿œä¸ä¼šå‘é€åˆ°æœåŠ¡å™¨**ï¼Œä»ç‰©ç†ä¸Šæœç»äº†å¯†é’¥æ³„éœ²çš„å¯èƒ½ã€‚
*   **å®‰å…¨æ¡æ‰‹**ï¼šæˆ‘ä»¬å¯ä»¥é€‰æ‹©åˆ©ç”¨ `/send` çš„é˜…åå³ç„šåŠŸèƒ½æ¥å®‰å…¨åœ°åˆ†å‘ `/chat` èŠå¤©å®¤çš„â€œé—¨ç¥¨å¯†ç â€ï¼Œè§£å†³äº† E2EE ä¸­æœ€æ£˜æ‰‹çš„åˆå§‹å¯†é’¥äº¤æ¢é—®é¢˜ï¼Œå½¢æˆäº†ä¸€ä¸ªå®Œç¾çš„å®‰å…¨é—­ç¯ã€‚
*   **è¿‡æœŸè‡ªåŠ¨é”€æ¯**ï¼šè¶…è¿‡é¢„è®¾çš„æ—¶é—´ï¼ˆé»˜è®¤3å¤©ï¼‰èŠå¤©å®¤æ²¡æœ‰æ–°å¢çš„èŠå¤©æ¶ˆæ¯ï¼ŒèŠå¤©å®¤ä¼šè¢«è‡ªåŠ¨é”€æ¯ã€‚

#### 3. å¹³å°çº§é€šç”¨é˜²æŠ¤
æ•´ä¸ªå¹³å°è¿˜å—åˆ°ä¸­é—´ä»¶ä¸»åŠ¨é˜²å¾¡ã€IP é€Ÿç‡é™åˆ¶å’Œå®‰å…¨å®¡è®¡æ—¥å¿—ç­‰å¤šå±‚é€šç”¨å®‰å…¨æªæ–½çš„ä¿æŠ¤ã€‚
æˆ‘ä»¬ä¸ä»…é˜²å¾¡ï¼Œè¿˜è®°å½•ã€‚ç³»ç»Ÿå†…ç½®äº†ä¸€å¥—å¯é…ç½®çš„å®¡è®¡æ—¥å¿—åŠŸèƒ½ï¼ˆé»˜è®¤å¼€å¯ï¼Œå¯åœ¨ç¯å¢ƒå˜é‡ä¸­å…³é—­ï¼‰ï¼Œå®ƒå°†å…³é”®çš„å®‰å…¨äº‹ä»¶ä»¥ç»“æ„åŒ–çš„å½¢å¼è®°å½•åˆ° Vercel KV æ•°æ®åº“ä¸­ã€‚è¿™åŒ…æ‹¬ï¼š
* **æ­£å¸¸è®¿é—®è®°å½•ï¼š** è°ï¼ˆIPï¼‰åœ¨ä»€ä¹ˆæ—¶é—´è®¿é—®äº†å“ªä¸ªé“¾æ¥/èŠå¤©å®¤ã€‚
* **æ¶æ„è¡Œä¸ºè¿½è¸ªï¼š** å“ªä¸ª IP å› ä¸ºé€Ÿç‡è¶…é™è€Œè¢«é˜»æ­¢è®¿é—®ã€‚æˆ‘ä»¬è®¾è®¡äº†* **æ™ºèƒ½æ—¥å¿—å»é‡æœºåˆ¶**ï¼Œå¯¹åŒä¸€ IP çš„æŒç»­æ”»å‡»åªè®°å½•ä¸€æ¬¡ï¼Œé¿å…æ—¥å¿—æ³›æ»¥ã€‚
* **æ—¥å¿—è‡ªåŠ¨æ¸…ç†**ï¼šæ‰€æœ‰æ—¥å¿—éƒ½æœ‰é¢„è®¾çš„ç”Ÿå‘½å‘¨æœŸï¼ˆé»˜è®¤ä¸º7å¤©ï¼‰ï¼Œè¿‡æœŸåä¼šè‡ªåŠ¨ä»æ•°æ®åº“ä¸­åˆ é™¤ï¼Œç¡®ä¿åœ¨æä¾›å®‰å…¨è¿½æº¯èƒ½åŠ›çš„åŒæ—¶ï¼Œä¸æ°¸ä¹…å­˜å‚¨æ•æ„Ÿçš„è®¿é—®æ•°æ®ã€‚
  
## å¿«é€Ÿå¼€å§‹ï¼šä¸€é”®éƒ¨ç½²åˆ° Vercel

1.  **Fork æœ¬é¡¹ç›®**
    > ç‚¹å‡»ä»“åº“å³ä¸Šè§’çš„ "Fork" æŒ‰é’®ï¼Œå°†é¡¹ç›®å¤åˆ»åˆ°æ‚¨è‡ªå·±çš„ GitHub è´¦æˆ·ä¸‹ã€‚è¿™æ ·åšçš„å¥½å¤„æ˜¯ï¼Œå½“æœ¬é¡¹ç›®æ›´æ–°æ—¶ï¼Œæ‚¨å¯ä»¥è½»æ¾åœ°å°†æ›´æ–°åŒæ­¥åˆ°æ‚¨çš„ä»“åº“ã€‚

2.  **ä¸€é”®éƒ¨ç½²åˆ° Vercel**
    > åœ¨æ‚¨ Fork åçš„ä»“åº“é¡µé¢ï¼Œç‚¹å‡»ä¸‹æ–¹çš„ "Deploy with Vercel" æŒ‰é’®ã€‚

    [![Deploy with Vercel](https://vercel.com/button)](https://vercel.com/new/clone?repository-url=https%3A%2F%2Fgithub.com%2Finfrost%2Fnext-secure-share)

3.  **åˆ›å»ºå¹¶å…³è”æ•°æ®åº“ (Vercel KV)**
    *   åœ¨ Vercel çš„éƒ¨ç½²æµç¨‹ä¸­ï¼Œç³»ç»Ÿä¼šå¼•å¯¼ä½ åˆ›å»ºä¸€ä¸ª Vercel KV æ•°æ®åº“ã€‚
    *   åªéœ€ç‚¹å‡»å‡ ä¸‹ï¼ŒVercel å°±ä¼šè‡ªåŠ¨ä¸ºä½ åˆ›å»ºæ•°æ®åº“ï¼Œå¹¶å°†å…¶ä¸ä½ çš„é¡¹ç›®å…³è”ã€‚å…³è”åï¼Œæ‰€æœ‰å¿…éœ€çš„ `KV_*` å’Œ `REDIS_URL` ç¯å¢ƒå˜é‡**ä¼šè‡ªåŠ¨é…ç½®å¥½ã€‚**

4.  **é…ç½®å…¶ä½™ç¯å¢ƒå˜é‡**
    *   åœ¨ Vercel é¡¹ç›®çš„ **Settings -> Environment Variables** é¡µé¢ï¼Œæ·»åŠ ä¸‹æ–‡ã€ç¯å¢ƒå˜é‡é…ç½®ã€‘ä¸­æåˆ°çš„å…¶ä»–å˜é‡ï¼ˆå¦‚ `ADMIN_PASSWORD`ï¼‰ã€‚

5.  **é‡æ–°éƒ¨ç½²**
    *   é…ç½®å¥½æ‰€æœ‰ç¯å¢ƒå˜é‡åï¼Œè¿›å…¥ Vercel é¡¹ç›®çš„ **Deployments** æ ‡ç­¾é¡µï¼Œæ‰¾åˆ°æœ€æ–°çš„éƒ¨ç½²è®°å½•ï¼Œç‚¹å‡» "Redeploy" ä»¥åº”ç”¨æ–°çš„ç¯å¢ƒå˜é‡ã€‚

6.  **Next Secure Share, å¯åŠ¨ï¼**
    *   è®¿é—® `your-domain.com/send` åˆ›å»ºä¸€æ¬¡æ€§é“¾æ¥ã€‚
    *   è®¿é—® `your-domain.com/chat` åˆ›å»ºç§å¯†èŠå¤©å®¤ã€‚
    *   **æ³¨æ„**ï¼šä¸ºäº†å®‰å…¨ï¼Œç›´æ¥è®¿é—®æ ¹åŸŸå `your-domain.com` ä¼šè¿”å› 404ã€‚

## ç¯å¢ƒå˜é‡é…ç½®

è¯·åœ¨ Vercel é¡¹ç›®ä¸­æ·»åŠ æˆ–åœ¨æœ¬åœ°å¼€å‘æ—¶åˆ›å»º `.env.local` æ–‡ä»¶æ¥é…ç½®ä»¥ä¸‹å˜é‡ã€‚
**æ³¨æ„ï¼šå¦‚æœä¸éœ€è¦é‚®ä»¶äºŒæ¬¡éªŒè¯åŠŸèƒ½ï¼Œå¯ä»¥ä¸é…ç½® `RESEND_*` å˜é‡ï¼Œä½†å»ºè®®ä¿ç•™è¿™ä¸¤ä¸ªå­—æ®µä¸ºç©ºã€‚**

#### `.env.local` ç¤ºä¾‹
```env
# Vercel KV (Upstash) ä¼šè‡ªåŠ¨æä¾›ä»¥ä¸‹å˜é‡ï¼Œè¯·ä» Vercel Storage æ ‡ç­¾é¡µå¤åˆ¶
KV_URL=...
KV_REST_API_URL=...
KV_REST_API_TOKEN=...
KV_REST_API_READ_ONLY_TOKEN=...
REDIS_URL=...

# ç®¡ç†å‘˜å¯†ç  (ç”¨äºåˆ›å»ºé“¾æ¥å’ŒèŠå¤©å®¤)
ADMIN_PASSWORD="your-super-secret-admin-password"

# AES åŠ å¯†å¯†é’¥ (å¿…é¡»æ˜¯32ä¸ªå­—ç¬¦)
ENCRYPTION_SEED="a_very_strong_32_character_long_secret_key"

# [å¯é€‰] Resend é…ç½®ï¼Œä»…åœ¨éœ€è¦é‚®ç®±äºŒæ¬¡éªŒè¯æ—¶å¡«å†™
# å¦‚æœä¸ä½¿ç”¨resendä¹Ÿå»ºè®®åˆ›å»ºè¿™ä¸¤ä¸ªç©ºç™½å˜é‡
RESEND_API_KEY=""
RESEND_FROM_EMAIL=""

# åº”ç”¨çš„å…¬å¼€è®¿é—®åœ°å€ (éå¸¸é‡è¦)
NEXT_PUBLIC_APP_URL="https://your-domain.com"
#å¦‚æœæ˜¯æœ¬åœ°devï¼Œé‚£åº”è¯¥æ˜¯http://localhost:3000

# [æ¨è] é€Ÿç‡é™åˆ¶ä¸æ—¥å¿—é…ç½®
RATE_LIMIT_ENABLE=true
RATE_LIMIT_COUNT=10
RATE_LIMIT_WINDOW="2 m"
AUDIT_LOG_ENABLE=true
RATE_LIMIT_LOG_TTL=604800 # æ—¥å¿—ä¿ç•™7å¤© (ç§’)
```

#### å˜é‡è¯¦è§£

| å˜é‡å | è¯´æ˜ | æ¨è/é»˜è®¤å€¼ |
| :--- | :--- | :--- |
| `KV_*`, `REDIS_URL` | **[Vercel è‡ªåŠ¨æä¾›]** ä¸ Vercel KV (Redis) æ•°æ®åº“ç›¸å…³çš„è¿æ¥å‡­è¯ã€‚ | - |
| `ADMIN_PASSWORD` | ç”¨äºè®¿é—® `/send` å’Œ `/chat` åˆ›å»ºé¡µé¢çš„ç®¡ç†å‘˜å¯†ç ã€‚**åŠ¡å¿…è®¾ç½®ä¸ºå¼ºå¯†ç **ã€‚ | - |
| `ENCRYPTION_SEED` | ç”¨äºæœåŠ¡ç«¯ AES åŠ å¯†æ•°æ®çš„å¯†é’¥ï¼Œ**å¿…é¡»æ˜¯ 32 ä¸ªå­—ç¬¦é•¿**ã€‚ | - |
| `RESEND_API_KEY` | **[å¯é€‰]** [Resend](https://resend.com/) æœåŠ¡çš„ API Keyã€‚ | `""` |
| `RESEND_FROM_EMAIL` | **[å¯é€‰]** ä½ åœ¨ Resend ä¸ŠéªŒè¯è¿‡çš„å‘ä»¶é‚®ç®±åœ°å€ã€‚ | `""` |
| `NEXT_PUBLIC_APP_URL` | ä½ çš„åº”ç”¨éƒ¨ç½²åçš„å…¬å¼€è®¿é—®åŸŸåï¼Œç”¨äºç”Ÿæˆåˆ†äº«é“¾æ¥ã€‚ | `https://your-domain.com` |
| `RATE_LIMIT_ENABLE`| æ˜¯å¦å¯ç”¨é€Ÿç‡é™åˆ¶ã€‚**å¼ºçƒˆå»ºè®®åœ¨ç”Ÿäº§ç¯å¢ƒå¼€å¯**ã€‚ | `true` |
| `RATE_LIMIT_COUNT` | åœ¨æŒ‡å®šæ—¶é—´çª—å£å†…çš„æœ€å¤§è¯·æ±‚æ¬¡æ•°ã€‚ | `10` |
| `RATE_LIMIT_WINDOW`| é€Ÿç‡é™åˆ¶çš„æ—¶é—´çª—å£ï¼Œæ ¼å¼ä¸º `æ•°å­— + ç©ºæ ¼ + å•ä½` (`s`, `m`, `h`, `d`)ã€‚ | `2 m` |
| `AUDIT_LOG_ENABLE`| æ˜¯å¦å¯ç”¨è®¿é—®å®¡è®¡æ—¥å¿—ã€‚ | `true` |
| `RATE_LIMIT_LOG_TTL`| å®¡è®¡æ—¥å¿—åœ¨æ•°æ®åº“ä¸­çš„ä¿ç•™æ—¶é—´ï¼ˆç§’ï¼‰ã€‚ | `604800` |

## æœ¬åœ°éƒ¨ç½²

1.  **å…‹éš†é¡¹ç›®åˆ°æœ¬åœ°**ï¼š
    ```bash
    git clone https://github.com/infrost/next-secure-share.git
    cd next-secure-share
    ```

2.  **åˆ›å»ºå¹¶è¿æ¥æ•°æ®åº“**
    *   åœ¨ [Vercel](https://vercel.com) è´¦æˆ·ä¸­åˆ›å»ºä¸€ä¸ª Vercel KV æ•°æ®åº“ã€‚
    *   åœ¨æ•°æ®åº“çš„ `.env.local` æ ‡ç­¾é¡µï¼Œå¤åˆ¶æ‰€æœ‰ç¯å¢ƒå˜é‡ã€‚

3.  **é…ç½®ç¯å¢ƒå˜é‡**ï¼š
    *   åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º `.env.local` æ–‡ä»¶ï¼Œç²˜è´´ä¸Šä¸€æ­¥å¤åˆ¶çš„ `KV_*` å˜é‡ï¼Œå¹¶å¡«å…¥å…¶ä»–æ‰€æœ‰å¿…éœ€çš„å˜é‡ï¼ˆå‚è€ƒä¸Šæ–¹ç¤ºä¾‹ï¼‰ã€‚

4.  **å®‰è£…ä¾èµ–å¹¶è¿è¡Œ**ï¼š
    ```bash
    pnpm install
    pnpm dev
    ```

5.  **è®¿é—®åº”ç”¨**:
    *   ä¸€æ¬¡æ€§é“¾æ¥åˆ›å»ºé¡µ: `http://localhost:3000/send`
    *   èŠå¤©å®¤åˆ›å»ºé¡µ: `http://localhost:3000/chat`

## API

æœ¬æœåŠ¡æä¾›äº†ä¸€å¥—å®‰å…¨çš„ API ç«¯ç‚¹ï¼Œç”¨äºé€šè¿‡ç¼–ç¨‹æ–¹å¼åˆ›å»ºå’Œé”€æ¯æ•æ„Ÿä¿¡æ¯é“¾æ¥ã€‚æ‰€æœ‰ API è¯·æ±‚éƒ½éœ€è¦æä¾›æœ‰æ•ˆçš„ `adminPassword` è¿›è¡Œæˆæƒã€‚

### API æ ¹åœ°å€

```
https://your-app-domain.com
```
*(è¯·å°† `https://your-app-domain.com` æ›¿æ¢ä¸ºæ‚¨çš„å®é™…åº”ç”¨åŸŸåã€‚æœ¬åœ°æµ‹è¯•æ—¶ï¼Œè¯·ä½¿ç”¨ `http://localhost:3000`)*

---

### 1. åˆ›å»ºå®‰å…¨é“¾æ¥

æ­¤ç«¯ç‚¹å…è®¸æ‚¨ç”Ÿæˆä¸€ä¸ªæ–°çš„å®‰å…¨é“¾æ¥ã€‚æ‚¨å¯ä»¥è®©ç³»ç»Ÿä¸ºæ‚¨ç”Ÿæˆä¸€ä¸ªéšæœºå¯†ç ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨æ‚¨è‡ªå·±æä¾›çš„è‡ªå®šä¹‰å¯†ç ã€‚

*   **ç«¯ç‚¹åœ°å€**: `/api/generate`
*   **è¯·æ±‚æ–¹æ³•**: `POST`
*   **å†…å®¹ç±»å‹**: `application/json`

#### è¯·æ±‚ä½“å‚æ•°

| å‚æ•° | ç±»å‹ | æ˜¯å¦å¿…éœ€ | æè¿° |
| :--- | :--- | :--- | :--- |
| `adminPassword` | string | **æ˜¯** | ç”¨äºæˆæƒè¯·æ±‚çš„ç®¡ç†å‘˜å¯†ç ã€‚ |
| `customPassword`| string | å¦ | ä¸ºæœºå¯†ä¿¡æ¯è®¾ç½®ä¸€ä¸ªè‡ªå®šä¹‰å¯†ç ã€‚å¦‚æœç•™ç©ºï¼Œç³»ç»Ÿå°†ä¸ºæ‚¨ç”Ÿæˆä¸€ä¸ª16ä½çš„å¼ºéšæœºå¯†ç ã€‚ |
| `message` | string | å¦ | æŸ¥çœ‹æœºå¯†ä¿¡æ¯æ—¶å‘ç”¨æˆ·æ˜¾ç¤ºçš„å¯é€‰æ¶ˆæ¯ã€‚ |
| `expiry` | string | å¦ | é“¾æ¥çš„ç”Ÿå‘½å‘¨æœŸï¼ˆå•ä½ï¼šå°æ—¶ï¼‰ã€‚é»˜è®¤ä¸º `72`ï¼ˆ3å¤©ï¼‰ã€‚ |
| `burnAfterRead` | boolean | å¦ | å¦‚æœä¸º `true`ï¼Œé“¾æ¥åœ¨é¦–æ¬¡è¢«æŸ¥çœ‹åå°†ç«‹å³é”€æ¯ã€‚é»˜è®¤ä¸º `false`ã€‚ |
| `enable2FA` | boolean | å¦ | å¦‚æœä¸º `true`ï¼ŒæŸ¥çœ‹æœºå¯†ä¿¡æ¯å‰éœ€è¦è¿›è¡Œé‚®ä»¶éªŒè¯ã€‚é»˜è®¤ä¸º `false`ã€‚ |
| `email` | string | æ˜¯ (å½“ `enable2FA` ä¸º `true` æ—¶) | ç”¨äºåŒå› ç´ è®¤è¯çš„æ¥æ”¶è€…é‚®ç®±åœ°å€ã€‚ |

#### ç¤ºä¾‹ 1: `curl` - ç”Ÿæˆä¸€ä¸ªç”±ç³»ç»Ÿæä¾›å¯†ç çš„é“¾æ¥

æœ¬ç¤ºä¾‹å°†åˆ›å»ºä¸€ä¸ªç®€å•çš„â€œé˜…åå³ç„šâ€é“¾æ¥ï¼Œå¹¶é™„å¸¦ä¸€æ¡æ¶ˆæ¯ã€‚API å°†ä¼šè‡ªåŠ¨ç”Ÿæˆå¯†ç å¹¶åœ¨å“åº”ä¸­è¿”å›ã€‚

```bash
curl --location --request POST 'https://your-app-domain.com/api/generate' \
--header 'Content-Type: application/json' \
--data-raw '{
    "adminPassword": "æ‚¨çš„ç®¡ç†å‘˜å¯†ç ",
    "message": "è¿™æ˜¯ç”¨äºæµ‹è¯•æœåŠ¡å™¨çš„ä¸´æ—¶è®¿é—®ä»¤ç‰Œã€‚",
    "burnAfterRead": true,
    "expiry": "1"
}'
```

**é¢„æœŸæˆåŠŸå“åº” (200 OK):**
```json
{
    "url": "https://your-app-domain.com/?v=aBcDe",
    "password": "gE7pL9qR2hK4mN1w" 
}
```

#### ç¤ºä¾‹ 2: Python è„šæœ¬ - åˆ›å»ºä¸€ä¸ªå¸¦è‡ªå®šä¹‰å¯†ç å’Œ2FAçš„é“¾æ¥

æ­¤è„šæœ¬æ¼”ç¤ºäº†å¦‚ä½•åˆ›å»ºä¸€ä¸ªæ›´å¤æ‚çš„é“¾æ¥ï¼Œå®ƒä½¿ç”¨é¢„è®¾çš„å¯†ç ï¼Œå¹¶è¦æ±‚æ¥æ”¶è€…åœ¨æŸ¥çœ‹å‰é€šè¿‡é‚®ä»¶è¿›è¡Œèº«ä»½éªŒè¯ã€‚

```python
import requests
import json

# --- é…ç½® ---
API_URL = "https://your-app-domain.com/api/generate"
ADMIN_PASSWORD = "æ‚¨çš„ç®¡ç†å‘˜å¯†ç "

# --- è¯·æ±‚æ•°æ® ---
payload = {
    "adminPassword": ADMIN_PASSWORD,
    "customPassword": "SuperSecretPassword_2025!",
    "message": "å‡¤å‡°é¡¹ç›® - ç”Ÿäº§æ•°æ®åº“å‡­è¯ã€‚",
    "enable2FA": True,
    "email": "dev-ops-team@example.com"
}

# --- å‘èµ· API è°ƒç”¨ ---
try:
    response = requests.post(API_URL, json=payload, timeout=10)
    response.raise_for_status()  # å¦‚æœçŠ¶æ€ç ä¸æ˜¯ 2xxï¼Œåˆ™ä¼šæŠ›å‡ºå¼‚å¸¸
    
    result = response.json()
    
    print("âœ… é“¾æ¥åˆ›å»ºæˆåŠŸï¼")
    print(f"   URL: {result.get('url')}")
    # å› ä¸ºæˆ‘ä»¬æä¾›äº†è‡ªå®šä¹‰å¯†ç ï¼Œæ‰€ä»¥å“åº”ä¸­ä¸ä¼šåŒ…å« 'password' å­—æ®µã€‚
    
except requests.exceptions.HTTPError as e:
    print(f"âŒ HTTP é”™è¯¯: {e.response.status_code}")
    print(f"   å“åº”å†…å®¹: {e.response.text}")
except requests.exceptions.RequestException as e:
    print(f"âŒ è¯·æ±‚å¤±è´¥: {e}")

```

---

### 2. é”€æ¯å®‰å…¨é“¾æ¥ (å¯é€‰ API)

å¦‚æœæ‚¨å·²ç»å®ç°äº†å¯é€‰çš„ `/api/destroy` ç«¯ç‚¹ï¼Œåˆ™å¯ä»¥ä½¿ç”¨æ­¤åŠŸèƒ½æ¥é€šè¿‡ç¼–ç¨‹æ–¹å¼é”€æ¯é“¾æ¥ã€‚

*   **ç«¯ç‚¹åœ°å€**: `/api/destroy`
*   **è¯·æ±‚æ–¹æ³•**: `POST`
*   **å†…å®¹ç±»å‹**: `application/json`

#### è¯·æ±‚ä½“å‚æ•°

| å‚æ•° | ç±»å‹ | æ˜¯å¦å¿…éœ€ | æè¿° |
| :--- | :--- | :--- | :--- |
| `adminPassword` | string | **æ˜¯** | ç”¨äºæˆæƒè¯·æ±‚çš„ç®¡ç†å‘˜å¯†ç ã€‚ |
| `id` | string | **æ˜¯** | éœ€è¦é”€æ¯çš„é“¾æ¥çš„5ä½å”¯ä¸€ID (å³URLä¸­ `v` å‚æ•°çš„å€¼)ã€‚ |

#### ç¤ºä¾‹: `curl` - é”€æ¯ä¸€ä¸ªæŒ‡å®šçš„é“¾æ¥

æœ¬ç¤ºä¾‹å±•ç¤ºäº†å¦‚ä½•é”€æ¯ ID ä¸º `aBcDe` çš„é“¾æ¥ã€‚

```bash
curl --location --request POST 'https://your-app-domain.com/api/destroy' \
--header 'Content-Type: application/json' \
--data-raw '{
    "adminPassword": "æ‚¨çš„ç®¡ç†å‘˜å¯†ç ",
    "id": "aBcDe"
}'
```

**é¢„æœŸæˆåŠŸå“åº” (200 OK):**
```json
{
    "message": "Record destroyed."
}
```

#### ç¤ºä¾‹: Python è„šæœ¬ - ä½¿ç”¨åæ¸…ç†é“¾æ¥

æ­¤è„šæœ¬æ¼”ç¤ºäº†ä¸€ä¸ªå¸¸è§çš„è‡ªåŠ¨åŒ–å·¥ä½œæµï¼šåˆ›å»ºä¸€ä¸ªé“¾æ¥ï¼Œä½¿ç”¨å®ƒï¼Œç„¶åç«‹å³å°†å…¶é”€æ¯ã€‚

```python
import requests

# (å‡è®¾å‰é¢å·²æœ‰ create_secure_link å‡½æ•°)

def destroy_secure_link(link_id: str):
    """é€šè¿‡ API é”€æ¯ä¸€ä¸ªå®‰å…¨é“¾æ¥ã€‚"""
    API_URL = "https://your-app-domain.com/api/destroy"
    ADMIN_PASSWORD = "æ‚¨çš„ç®¡ç†å‘˜å¯†ç "
    
    payload = {
        "adminPassword": ADMIN_PASSWORD,
        "id": link_id
    }
    try:
        response = requests.post(API_URL, json=payload, timeout=10)
        response.raise_for_status()
        print(f"âœ… ID ä¸º '{link_id}' çš„é“¾æ¥å·²æˆåŠŸé”€æ¯ã€‚")
        return True
    except requests.exceptions.HTTPError as e:
        print(f"âŒ é”€æ¯é“¾æ¥ '{link_id}' å¤±è´¥: {e.response.text}")
        return False

# --- å·¥ä½œæµæ¼”ç¤º ---
if __name__ == "__main__":
    # 1. åˆ›å»ºä¸€ä¸ªé“¾æ¥
    # creation_result = create_secure_link(message="æ­¤é“¾æ¥ä»…ä¾›ç«‹å³ä½¿ç”¨å’Œé”€æ¯ã€‚")
    # ä¸ºæ–¹ä¾¿æ¼”ç¤ºï¼Œæˆ‘ä»¬å‡è®¾å·²æˆåŠŸåˆ›å»ºé“¾æ¥å¹¶è·å¾—äº†å…¶ID
    creation_result = {'url': 'https://your-app-domain.com/?v=xYz12'}
    
    if creation_result:
        link_url = creation_result.get('url')
        link_id = link_url.split('v=')[-1]
        
        print(f"é“¾æ¥å·²åˆ›å»ºï¼ŒID: {link_id}")
        
        # 2. æ¨¡æ‹Ÿä½¿ç”¨è¿™ä¸ªæœºå¯†ä¿¡æ¯ (ä¾‹å¦‚ï¼Œåœ¨CI/CDä»»åŠ¡ä¸­)
        print("...æ¨¡æ‹Ÿä½¿ç”¨æœºå¯†ä¿¡æ¯ä¸­...")
        
        # 3. é”€æ¯é“¾æ¥
        destroy_secure_link(link_id)
```

## æŠ€æœ¯æ ˆ

*   **æ¡†æ¶**: Next.js 14+ (App Router/Server Action)
*   **UI**: Tailwind CSS
*   **æ•°æ®åº“**: Redis (Vercel KV via Upstash)
*   **åŠ å¯†**: Node.js `crypto` (AES-256), Web Crypto API
*   **é‚®ä»¶æœåŠ¡**: Resend
*   **éƒ¨ç½²**: Vercel (Serverless, Edge Middleware)

## å·¥ä½œæµç¨‹

### (ä¸€) é˜…åå³ç„šé“¾æ¥

æ­¤æµç¨‹ç”¨äºå®‰å…¨åœ°å•æ¬¡ä¼ é€’ä¿¡æ¯ã€‚

```mermaid
flowchart TD
 subgraph Sender["Sender"]
        B{"è¾“å…¥ç®¡ç†å‘˜å¯†ç å’Œæœºå¯†ä¿¡æ¯"}
        A["è®¿é—® /send é¡µé¢"]
        C["é…ç½®å¤±æ•ˆæ—¶é—´ã€é‚®ç®±äºŒæ¬¡éªŒè¯å¯é€‰"]
        D["ç‚¹å‡» ç”Ÿæˆé“¾æ¥"]
  end
 subgraph subGraph1["Vercel Secure Share (åç«¯)"]
        E{"åå°è¿›è¡ŒAES-256-GCMåŠ å¯†"}
        F["ç”Ÿæˆå”¯ä¸€çš„çŸ­é“¾æ¥ID å¦‚: 7bN2p"]
        G["åŠ å¯†æ•°æ®å­˜å…¥ Vercel KV Redis"]
  end
 subgraph Receiver["Receiver"]
        I["ç‚¹å‡»é“¾æ¥ example.com/?v=7bN2p"]
        H["é€šè¿‡é‚®ä»¶/IM æ”¶åˆ°é“¾æ¥"]
        J{"éœ€è¦é‚®ç®±éªŒè¯?"}
        K["è¾“å…¥é‚®ç®±ï¼Œç‚¹å‡»éªŒè¯"]
        L["é€šè¿‡ Magic Link éªŒè¯åæŸ¥çœ‹æœºå¯†"]
        M["æŸ¥çœ‹æœºå¯†ä¿¡æ¯"]
  end
 subgraph subGraph3["Vercel Secure Share (åç«¯)"]
        N["ä¿¡æ¯ä»æ•°æ®åº“ä¸­è¢«è‡ªåŠ¨é”€æ¯!"]
  end
    A --> B
    B --> C
    C --> D
    D --> E
    E --> F
    F --> G
    H --> I
    I --> J
    J -- æ˜¯ --> K
    J -- å¦ --> M
    K --> L
    L --> M
    M --> N

    style Sender stroke-width:2px
    style Receiver stroke-width:2px
```

### (äºŒ) ç«¯åˆ°ç«¯åŠ å¯†èŠå¤©

æ­¤æµç¨‹ç¡®ä¿åªæœ‰å¯¹è¯åŒæ–¹èƒ½çœ‹åˆ°æ¶ˆæ¯å†…å®¹ï¼Œå®ç°äº†çœŸæ­£çš„ç«¯åˆ°ç«¯åŠ å¯†ã€‚

```mermaid
flowchart TD
    subgraph Admin["ç®¡ç†å‘˜ (åˆ›å»ºè€…)"]
        A["è®¿é—® /chat é¡µé¢"] --> B{"è¾“å…¥ç®¡ç†å‘˜å¯†ç "};
        B --> C["(å¯é€‰)è®¾ç½®èŠå¤©è®¿é—®å¯†ç "];
        C --> D["ç‚¹å‡»'åˆ›å»ºèŠå¤©å®¤'"];
        D --> E{"è·å¾—ä¸¤ä¸ªå‚ä¸è€…é“¾æ¥: <br/> .../chat/ID?p=A <br/> .../chat/ID?p=B"};
    end

    subgraph Server["æœåŠ¡å™¨ (ä»…ä½œæ•°æ®ä¸­è½¬)"]
       F["å­˜å‚¨åŠ å¯†çš„è®¿é—®å¯†ç (å¦‚æœ‰)å’Œç©ºçš„èŠå¤©è®°å½•"];
       G["ä»…ä¼ é€’åŠ å¯†çš„æ¶ˆæ¯æ•°æ®åŒ…"];
       H["æ— æ³•è§£å¯†ä»»ä½•å†…å®¹"];
    end

    subgraph KeyExchange["å®‰å…¨å¯†é’¥äº¤æ¢ (å…³é”®æ­¥éª¤)"]
        I["ç®¡ç†å‘˜ä½¿ç”¨ä¸Šæ–¹'é˜…åå³ç„š'åŠŸèƒ½"];
        J["åˆ›å»ºä¸€ä¸ªä¸€æ¬¡æ€§é“¾æ¥, å†…å®¹ä¸ºèŠå¤©è®¿é—®å¯†ç "];
        K["å°†æ­¤ä¸€æ¬¡æ€§é“¾æ¥åˆ†åˆ«å‘ç»™å‚ä¸è€…Aå’ŒB"];
    end
    
    subgraph Participants["å‚ä¸è€… A & B"]
        L["ç‚¹å‡»å„è‡ªçš„èŠå¤©é“¾æ¥"];
        M["æµè§ˆå™¨è‡ªåŠ¨ç”Ÿæˆæœ¬åœ°è§£å¯†å¯†é’¥ (åœ¨URLçš„#å, ä¸å‘é€ç»™æœåŠ¡å™¨)"];
        N{"è¾“å…¥ä»ä¸€æ¬¡æ€§é“¾æ¥ä¸­è·å¾—çš„è®¿é—®å¯†ç "};
        O["è¿›å…¥èŠå¤©å®¤, å‘é€æ¶ˆæ¯"];
        P["æ¶ˆæ¯åœ¨æµè§ˆå™¨å†…åŠ å¯†åå‘é€"];
        Q["æ”¶åˆ°çš„æ¶ˆæ¯åœ¨æµè§ˆå™¨å†…è§£å¯†åæ˜¾ç¤º"];
    end

    D --> F;
    E --> I;
    E --> L;
    O -- "å‘é€åŠ å¯†æ•°æ®" --> G;
    G -- "è½¬å‘åŠ å¯†æ•°æ®" --> P;

    style Admin stroke-width:2px
    style Participants stroke-width:2px
    style KeyExchange stroke:#f96,stroke-width:2px,stroke-dasharray: 5 5
```

---
å¦‚éœ€è¯¦ç»† API æˆ–ä»£ç è¯´æ˜ï¼Œè¯·æŸ¥é˜…æºç æˆ–æäº¤ Issueã€‚

**å¤šè¯­è¨€ç¿»è¯‘çš„éšç§æç¤ºï¼š** æœ¬é¡¹ç›®çš„å¤šè¯­è¨€åŠŸèƒ½æ˜¯é€šè¿‡ Google Translate Element å®ç°çš„ã€‚å½“æ‚¨åˆ‡æ¢åˆ°éé»˜è®¤è¯­è¨€æ—¶ï¼Œé¡µé¢ä¸Šçš„æ–‡æœ¬å†…å®¹å¯èƒ½ä¼šè¢«å‘é€ç»™ Google çš„æœåŠ¡å™¨è¿›è¡Œç¿»è¯‘ã€‚å¦‚æœæ‚¨å¤„ç†çš„æ˜¯æœ€é«˜çº§åˆ«çš„æ•æ„Ÿä¿¡æ¯ï¼Œå»ºè®®ä¿æŒä½¿ç”¨é»˜è®¤è¯­è¨€ä»¥é¿å…æ­¤ç¯èŠ‚ã€‚
